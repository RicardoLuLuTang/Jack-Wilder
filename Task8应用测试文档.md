# Smart商城应用测试文档
## 单元测试：使用Junit
1. 检查了是否有错误的边界条件。Eg：空值或者不完整的值，例如null和(0,1,2,) ，传入数值与实际要求不符，例如给int型的list传入string型数据 ，事情的执行顺序是错误的，例如在登录系统之前就打印了文件 。
2. 强制产生错误条件。Eg：网络连接断开，系统过载，显示分辨率太高或太低。
3. 结果是否正确。
4. 检查了反向关联。
5. 模块接口测试。检查了模块接口是否正确，输入的实际参数与形式参数是否一致。调用其他模块的实际参数与被调模块的形参是否一致，全程变量的定义在各模块是否一致。
## 功能测试：
&emsp;&emsp;用客户的身份登录网站并实现购买商品。           
&emsp;&emsp;从注册->登录->浏览网站商品->将商品加入收藏夹->将商品加入购物车-> 选择需要购买商品->结算->确认收货地址和支付方式，确认商品信息->添加备注->提交订单->订单完成。每个部分都以客户的身份进行了测试。
## 性能测试：loadrunner
&emsp;&emsp;进行了并发性能测试，大数据量测试和速度测试。通过同时登陆多个用户来执行购买操作，测试软件的性能瓶颈在哪。
<image src="./task8pic/图片2.png">
&emsp;&emsp;先用virtual user generator编写虚拟脚本，然后用controller设置场景：2000个用户同时接入，run之后发现loadrunner卡在那里不动了，后面所有的case都失败，原因就是设置的用户数太多，这是负载机因为自身的资源条件限制而引起的，后来利用分布加压解决了。场景运行完后进行数据分析。
- 网络监控（根据经验，就是查看对比前后流量，ping服务器等）
- CPU利用率（% Processor Time）：指处理器执行非闲置线程时间的百分比。过低，则服务器CPU利用率不高；过高，则CPU可能成为系统的处理瓶颈。
- 可用物理内存（ Available MBytes ）：当这个数值变小时，Windows开始频繁地调用磁盘页面文件。如果这个数值很小，例如小于5 MB，系统会将大部分时间消耗在操作页面文件上。一般要保留10%的可用内存。最低不能<4M，此值过小可能是内存不足或内存泄漏。
- 磁盘IO（% Disk Time）：指所选磁盘驱动器忙于为读或写入请求提供服务所用的时间的百分比。正常值<10，此值过大表示耗费太多时间来访问磁盘，可考虑增加内存、更换更快的硬盘、优化读写数据的算法。若数值持续超过80 (此时处理器及网络连接并没有饱和)，则可能是内存泄漏。
- 事务平均响应时间:（ Average Transaciton Response Time ）：随着测试时间的变化，系统处理事务的速度开始逐渐变慢，这说明应用系统随着投产时间的变化，整体性能将会有下降的趋势。好<2s、良好2~5s、差6~10s
- 吞吐量（ Throughput ）:可以依据服务器的吞吐量来评估虚拟用户产生的负载量，以及看出服务器在流量方面的处理能力以及是否存在瓶颈。
- 每秒点击次数（ Hits per Second ）:通过对查看“每秒点击次数”，可以判断系统是否稳定。系统点击率下降通常表明服务器的响应速度在变慢，需进一步分析，发现系统瓶颈所在。
- 虚拟用户数（Running Vusers）: 这个主要用于与其他监控数据结合来分析问题的。
<image src="./task8pic/图片1.png">
  
## 安全性测试：
#### Xss：在网页中的Textbox或者其他能输入数据的地方，输入这些测试脚本， 发现能弹出对话框，存在xss漏洞。这是由于我们网站对用户输入的参数过滤不严格而调用浏览器的JS而产生的。随后我们对这种漏洞进行了修复。
1. 将重要的cookie标记为http only,   这样的话Javascript 中的document.cookie语句就不能获取到cookie了.
2. 只允许用户输入我们期望的数据。 例如：　年龄的textbox中，只允许用户输入数字。 而数字之外的字符都过滤掉。
3. 对数据进行Html Encode 处理
4. 过滤或移除特殊的Html标签， 例如: <script>, <iframe> ,  &lt; for <, &gt; for >, &quot for
5. 过滤JavaScript 事件的标签。例如 "onclick=", "onfocus" 等等。     
  
## 防止SQL注入
#### 使用javascript在客户端进行不安全字符屏蔽
功能介绍：检查是否含有”‘”,”\\”,”/”          
参数说明：要检查的字符串            
返回值：0：是1：不是           
函数名是      
``` java
function check(a)
{
return 1;
fibdn = new Array (”‘” ,”\\”,”/”);
i=fibdn.length;
j=a.length;
for (ii=0; ii＜i; ii++)
{ for (jj=0; jj＜j; jj++)
{ temp1=a.charAt(jj);
temp2=fibdn[ii];
if (tem’; p1==temp2)
{ return 0; }
}
}
return 1;
}
```
